<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>A look at some Tweets from Thanksgiving 2015 by juandes</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/github-light.css">
    <meta name="viewport" content="width=device-width">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>A look at some Tweets from Thanksgiving 2015</h1>
        <p>A look at some Tweets obtained during Thanksgiving 2015. Analysis done using Apache Zeppelin and the Spark interpreter</p>

        <p class="view"><a href="https://github.com/juandes/thanksgiving-tweets">View the Project on GitHub <small>juandes/thanksgiving-tweets</small></a></p>


        <ul>
          <li><a href="https://github.com/juandes/thanksgiving-tweets/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/juandes/thanksgiving-tweets/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/juandes/thanksgiving-tweets">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="a-look-at-some-tweets-from-thanksgiving-2015" class="anchor" href="#a-look-at-some-tweets-from-thanksgiving-2015" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>A look at some Tweets from Thanksgiving 2015</h1>

<h2>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Overview</h2>

<hr>

<p>I will admit I am a huge fan of Twitter, and of the data it produces because it holds many interesting facts, and opinions of almost any subject from people from all around the world. During Thanksgiving 2015 (November 26), while everyone was eating turkey, I fired up Spark to capture tweets containing the keyword ‘thanksgiving’.</p>

<p>The reason I did this work was because I was interested in exploring the tweets generated during that period of time, in particular topics such as the most common retweet, and hashtag. Moreover, I wanted to try Apache Zeppelin, a web-based notebook (similar to iPython or Jupyter) for interactive data analytics.</p>

<h2>
<a id="the-data" class="anchor" href="#the-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The data</h2>

<hr>

<p>The dataset used is made of 177955 tweets obtained on November 26, 2015.</p>

<h2>
<a id="platforms-used" class="anchor" href="#platforms-used" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Platforms used</h2>

<ul>
<li>Apache Zeppelin and the Spark interpreter</li>
<li>Spark Streaming</li>
<li>Pig</li>
</ul>

<h2>
<a id="report" class="anchor" href="#report" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Report</h2>

<h3>
<a id="obtaining-the-data" class="anchor" href="#obtaining-the-data" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Obtaining the data</h3>

<p>The data used for this work was obtained using Spark Streaming, and its Twitter library. The script written captured only the text component of the tweet, in other word, just the tweet itself. After an hour or so of capturing tweets, I ended up with a directory made of many subdirectories that had the tweets. Because of this, a Pig script was written to transfer the content of all these files into a single one. Both of these scripts are on the GitHub repository.</p>

<h3>
<a id="the-result" class="anchor" href="#the-result" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The result</h3>

<p>Once the data was in the wanted format, it was loaded into Zeppelin. Keep in mind that I was using the Spark interpreter, meaning that the syntax you will see in the following images are Spark code, or Pyspark to be more specific.</p>

<p>The following images shows how the data was loaded, and the number of tweets available in the dataset, 177955.</p>

<p><img src="http://juandes.github.io/thanksgiving-tweets/images/loaddata_numbertweets.png" alt="load"></p>

<p>After counting the number of tweets, I called the flatMap to get every single word of the corpus, followed by a reduceByKey action to count them - the total number of words is 2145540. Then a new dataframe, made of the words and their frequency, was created. The next image shows the code, followed by two plots of the top 10 words that include the SQL query written to obtain the result. The first image has a comment that says "get the 20 most common words", please ignore it (I forgot to remove the comment before taking the screenshots).</p>

<p><img src="http://juandes.github.io/thanksgiving-tweets/images/word_count.png" alt="load"></p>

<p><img src="http://juandes.github.io/thanksgiving-tweets/images/count_1.png" alt="load"></p>

<p><img src="http://juandes.github.io/thanksgiving-tweets/images/count_2.png" alt="load"></p>

<p>These are the top 10 words and their frequency</p>

<ul>
<li>
<strong>thanksgiving</strong>: 114,556</li>
<li>
<strong>happy</strong>: 103,026</li>
<li>
<strong>rt</strong>: 85,202</li>
<li>
<strong>to</strong>: 59,143</li>
<li>
<strong>the</strong>: 40,918</li>
<li>
<strong>and</strong>: 36,614</li>
<li>
<strong>you</strong>: 31,783</li>
<li>
<strong>a</strong>: 31,105</li>
<li>
<strong>for</strong>: 28,792</li>
<li>
<strong>all</strong>: 28,089</li>
</ul>

<p>Is not surprising that the most common words are "thanksgiving" and "happy".</p>

<p>Something really cool about Zeppelin is that you can change the view of the output of an SQL query by just clicking one of the small icons below the query editor. Some of these views include a regular table (as seen on the previous image), a bar chart, a pie chart and others.</p>

<p>Now that we know what were the most common words, lets do the same but with the hashtags.</p>

<p>The next image shows the code used to get the hashtags. Most of the actions performed at this step are similar to those used to find the most common words, the exception in this case is that I used a regex to remove the special characters that follow a hashtag. For example, someone on Twitter might write the hashtag <code>#thanksgiving!</code>, but Twitter does not allow numbers or special characters on the hashtags, so the hashtag is just <code>#thanksgiving</code> - the <code>!</code> is just a normal character of the tweet.</p>

<p><img src="http://juandes.github.io/thanksgiving-tweets/images/hashtags_code.png" alt="load"></p>

<p>These are the top 10 hashtags:</p>

<ul>
<li>
<strong>#thanksgiving</strong>: 13,716</li>
<li>
<strong>#happythanksgiving</strong>: 1,871</li>
<li>
<strong>#thankful</strong>: 1,350</li>
<li>
<strong>#american</strong>: 677</li>
<li>
<strong>#revealed</strong>: 672</li>
<li>
<strong>#family</strong>: 657</li>
<li>
<strong>#imthankfulfor</strong>: 504</li>
<li>
<strong>#macysparade</strong>: 504 (call me skeptic but I do not like that there are two hashtags with the same count)</li>
<li>
<strong>#blessed</strong>: 380</li>
<li>
<strong>#turkey</strong>: 359</li>
</ul>

<p><img src="http://juandes.github.io/thanksgiving-tweets/images/hashtags.png" alt="load"></p>

<p>There is one hashtag from this list that feels out of place. Do you agree? That is the hashtag <code>#revealed</code>. This hashtag belongs to a tweet from an account called <code>@Drudge_Report</code> that starts like this "#REVEALED: What Your #Thanksgiving Feast Does to Your Organs...". Mystery solved.</p>

<p>Small note: in this image, the icons of the different plots didn't loaded correctly.</p>

<p>So far we have discovered the top words, and the top hashtags, and now it is time to find the most common mentions.</p>
      </section>
      <footer>
        <p>This project is maintained by <a href="https://github.com/juandes">juandes</a></p>
        <p><small>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></small></p>
      </footer>
    </div>
    <script src="javascripts/scale.fix.js"></script>
    
  </body>
</html>
